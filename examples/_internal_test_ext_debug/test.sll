(--- "debug.sll")

(:> (<- debug$get_call_stack) "\n")
(= test_func (,,, (:> (<- debug$get_call_stack) "\n")))
(<- test_func)
(<- (,,, (:> (<- debug$get_call_stack) "\n")))
(<- (,,, (<- test_func)))

(= str (+ "prefix_" (<- (,,, (@@ "test_string")))) (:> (<- debug$get_ref_count str) "\n"))
(:> "String: " str " (RC: " (<- debug$get_ref_count str) ")\n")
(:> "String: " str "\n")
(:> (<- debug$get_ref_count str) "\n")
(= x [5 10])
(= y x)
(:> "Array: " x " (RC: " (<- debug$get_ref_count x) ")\n")
(:> (<- debug$get_ref_count x) ", " (<- debug$get_ref_count y) "\n")

(= start (<- debug$get_instruction_count))
(-> (= ii 0) (< ii 100) {
	(++ ii)
	(? (== ii 5) (<<<))
	(:> "II=" ii "\n")
	(? (=== ii 10) (@))
})
(= end (<- debug$get_instruction_count))
(:> "Loop executed " (- end start) " instruction(s).\n")

(:> (<- debug$get_name test_func) "\n")
(:> (<- debug$get_name (. debug$call_stack_type)) "\n")
(:> (<- debug$get_vm_config) "\n")

(:> (<- debug$get_location) "\n")
(<- (,,, (:> (<- debug$get_location) "\n")))
(:> (<- debug$get_location (- (<- debug$get_instruction_index) 50)) "\n")

(= proxy (,,, f
	(<- f)
))

(<- proxy
	(,,,
		(:> (<- debug$backtrace))
	)
)
